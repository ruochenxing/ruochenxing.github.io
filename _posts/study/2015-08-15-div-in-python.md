---
layout: post
title:  Python2中的除法
tags:
    - Python Study
    - 除法
category: study

image: http://www.rc-tech.cc/wp-content/uploads/2015/03/python.png
description: Python在3.0之前，整数除法存在一个潜在的陷阱：一个整数被另一个整数除，计算结果的小数部分被截除了，只留下整数部分。有时候这个功能很有用，但通常情况需要普通的除法运算。
---

Python在3.0之前，整数除法存在一个潜在的陷阱：

~~~
>>> 1/2
0
~~~

这里发生了什么？一个整数被另一个整数除，计算结果的小数部分被截除了，只留下整数部分。有时候这个功能很有用，但通常情况需要普通的除法运算。那么可以有两个有效的解决方案：

* 用实数（浮点数）进行计算
* 改变Python除法的执行方式

如果参与除法的两个数中，有一个为浮点数，结果即为浮点数：

~~~
>>> 1.0/2
0.5
>>> 1/2.0
0.5
>>> 1.0/2.0
0.5
~~~

如果希望Python执行整数除法时能得到浮点数除法的结果，可以在程序前面加上：

~~~
from __future__ import division
~~~

或者是直接在解释器里面执行这句代码。（友情提示：`future` 前后分别是两个下划线。）

~~~
>>> from __future__ import division
>>> 1/2
0.5
~~~

当然，Python对浮点数提供了另外一个实现整除的操作符 `//`：

~~~
>>> 1//2
0
>>> 1.0//2.0
0.0
~~~

这里还有一个小小的陷阱，当负数用在除法中时，因为取整的关系 `-11/2` 得到的结果并不是想象中的 `-5` 而是 `-6` (取整不是四舍五入)。当引入 `from __future__ import division` 后，又可以得到浮点型的结果。

~~~
>>> -11/2
-6
>>> from __future__ import division
>>> -11/2
-5.5
~~~

在Python 3中 `/` 就表示的就是float除，不需要再额外引入模块，即使分子分母都是整数, 返回的也会是一个float类型的浮点数。
